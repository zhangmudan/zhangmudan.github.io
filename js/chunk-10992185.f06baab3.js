(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10992185"],{"1f07":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Navigate",{attrs:{title:"精彩跟帖"}}),s("div",{staticClass:"main"},[s("van-list",{attrs:{finished:t.finished,"finished-text":"我也是有底线的","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,i){return s("div",{key:i,staticClass:"comment"},[s("div",{staticClass:"user"},[s("div",{staticClass:"user-info"},[s("img",{attrs:{src:t.$axios.defaults.baseURL+e.user.head_img,alt:"这是图片"}}),s("div",{staticClass:"info"},[s("p",[t._v(t._s(e.user.nickname))]),s("p",{staticClass:"time"},[t._v(t._s(t.moment(e.create_date).fromNow()))])])]),s("div",{staticClass:"reply",on:{click:function(s){return t.handleReply(e)}}},[t._v("回复")])]),s("div",{staticClass:"content"},[s("p",[t._v(t._s(e.content))])]),e.parent?s("CommentFloor",{attrs:{data:e.parent},on:{replyFloor:t.handleReply}}):t._e()],1)})),0)],1),s("div",{staticClass:"footer"},[s("van-field",{ref:"textarea",staticClass:"textarea",class:t.isFocus?"active":"",attrs:{rows:t.rows,autosize:!t.isFocus,type:"textarea",placeholder:t.list_item.user?"回复:@"+t.list_item.user.nickname:"说点什么吧...",isFocus:!1},on:{focus:t.focus,blur:t.blur,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t.isFocus?s("span",{staticClass:"submit",on:{click:t.submit}},[t._v("发布")]):t._e()],1)],1)},a=[],n=(s("99af"),s("498a"),s("2909")),o=s("9e8f"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"floor"},[s("div",{staticClass:"user-floor"},[s("div",{staticClass:"user-info"},[s("div",{staticClass:"info"},[s("img",{attrs:{src:t.$axios.defaults.baseURL+t.data.user.head_img,alt:""}}),s("div",[s("p",[t._v(t._s(t.data.user.nickname))]),s("p",{staticClass:"time"},[t._v(t._s(t.moment(t.data.create_date).fromNow()))])])]),s("div",{staticClass:"reply",on:{click:function(e){return t.handleReply(t.data)}}},[t._v("回复")])]),s("div",{staticClass:"floor-content"},[t._v(t._s(t.data.content))]),t.data.parent?s("CommentFloor",{attrs:{data:t.data.parent},on:{replyFloor:t.handleReply}}):t._e()],1)])},c=[],u=s("c1df"),l=s.n(u),d={name:"CommentFloor",props:["data"],data:function(){return{moment:l.a}},methods:{handleReply:function(t){this.$emit("replyFloor",t)}}},f=d,m=(s("5d96"),s("2877")),p=Object(m["a"])(f,r,c,!1,null,"bfa3e42e",null),h=p.exports;l.a.locale("zh-CN");var v={data:function(){return{moment:l.a,id:"",list:[],loading:!1,finished:!1,pageIndex:1,pageSize:5,message:"",rows:1,isFocus:!1,list_item:{}}},components:{Navigate:o["a"],CommentFloor:h},mounted:function(){var t=this.$route.params.id;this.id=t,this.getList()},methods:{getList:function(){var t=this;this.$axios({url:"/post_comment/"+this.id,params:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then((function(e){var s=e.data.data;t.list=[].concat(Object(n["a"])(t.list),Object(n["a"])(s)),t.pageIndex+=1,t.loading=!1,s.length<t.pageSize&&(t.finished=!0)}))},onLoad:function(){this.getList()},focus:function(){this.isFocus=!0},blur:function(){var t=this;setTimeout((function(){t.isFocus=!1,""===t.message.trim()&&(t.list_item={})}),200)},submit:function(){var t=this;if(""!=this.message.trim()){var e=JSON.parse(localStorage.getItem("userInfor"))||{},s=e.token,i={content:this.message};this.list_item.id&&(i.parent_id=this.list_item.id),this.$axios({url:"/post_comment/"+this.id,headers:{Authorization:s},data:i,method:"POST"}).then((function(e){t.message="",t.$toast.success(e.data.message),t.list=[],t.pageIndex=1,t.getList(),t.list_item={},t.isFocus=!1}))}},handleReply:function(t){var e=this;setTimeout((function(){e.list_item=t,e.isFocus=!0,e.$refs.textarea.focus()}),200)}}},g=v,_=(s("38f0"),Object(m["a"])(g,i,a,!1,null,"c83997a2",null));e["default"]=_.exports},"243b":function(t,e,s){"use strict";var i=s("38b5"),a=s.n(i);a.a},"37c8":function(t,e,s){},"38b5":function(t,e,s){},"38f0":function(t,e,s){"use strict";var i=s("d9b5"),a=s.n(i);a.a},"498a":function(t,e,s){"use strict";var i=s("23e7"),a=s("58a8").trim,n=s("c8d2");i({target:"String",proto:!0,forced:n("trim")},{trim:function(){return a(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var i=s("1d80"),a=s("5899"),n="["+a+"]",o=RegExp("^"+n+n+"*"),r=RegExp(n+n+"*$"),c=function(t){return function(e){var s=String(i(e));return 1&t&&(s=s.replace(o,"")),2&t&&(s=s.replace(r,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},"5d96":function(t,e,s){"use strict";var i=s("37c8"),a=s.n(i);a.a},"99af":function(t,e,s){"use strict";var i=s("23e7"),a=s("d039"),n=s("e8b5"),o=s("861d"),r=s("7b0b"),c=s("50c4"),u=s("8418"),l=s("65f0"),d=s("1dde"),f=s("b622"),m=s("2d00"),p=f("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",g=m>=51||!a((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),_=d("concat"),b=function(t){if(!o(t))return!1;var e=t[p];return void 0!==e?!!e:n(t)},C=!g||!_;i({target:"Array",proto:!0,forced:C},{concat:function(t){var e,s,i,a,n,o=r(this),d=l(o,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(n=-1===e?o:arguments[e],b(n)){if(a=c(n.length),f+a>h)throw TypeError(v);for(s=0;s<a;s++,f++)s in n&&u(d,f,n[s])}else{if(f>=h)throw TypeError(v);u(d,f++,n)}return d.length=f,d}})},"9e8f":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav"},[t.isShow?s("span",{staticClass:"iconfont iconjiantou2",on:{click:function(e){return t.$router.replace("/")}}}):s("span",{staticClass:"iconfont iconjiantou2",on:{click:function(e){return t.$router.back()}}}),s("strong",[t._v(t._s(t.title))]),t.isShow?s("span",{staticClass:"iconfont iconshouye",on:{click:function(e){return t.$router.push("/")}}}):s("span")])},a=[],n={props:["title","isShow"]},o=n,r=(s("243b"),s("2877")),c=Object(r["a"])(o,i,a,!1,null,"4352c0d4",null);e["a"]=c.exports},c8d2:function(t,e,s){var i=s("d039"),a=s("5899"),n="​᠎";t.exports=function(t){return i((function(){return!!a[t]()||n[t]()!=n||a[t].name!==t}))}},d9b5:function(t,e,s){}}]);
//# sourceMappingURL=chunk-10992185.f06baab3.js.map